# function getEntityWithToken(text, token)
Обновлено 15 декабря 2023
[ ![](https://developers.sber.ru/docs/img/badges/Code.png)Code ](https://developers.sber.ru/docs/ru/va/code/overview)[ ![](https://developers.sber.ru/docs/img/badges/Brain.png)Brain ](https://developers.sber.ru/docs/ru/va/code/nlp/overview)
Выполняет вызов в NLU-сервис Brain и возвращает все заданные значения сущности в виде массива. Метод используется для обращения к стороннему обученному классификатору при помощи API-ключа.
  

##### Параметры
Метод принимает в качестве аргумента имя сущности и API-токен к стороннему обученному классификатору в виде строк `string`:
```
$caila.getEntityWithToken("Name", "token");  

```

[Подробнее о получении API-ключа](../../../nlp/api/overview.md#section/Autentifikaciya)
В качестве ответа передается JSON с набором значений, которые может принимать сущность.
  

##### Параметры
Рассмотрим пример вывода значений сущности. Предварительно зададим сущность `@Yes` в справочнике укажем набор паттернов:
```
[ну] [конечно|все|все|вроде|пожалуй|возможно] (да|даа|lf|ага|агась|точно|угу|верно|ок|ok|окей|окай|okay|оке|именно|подтвержд*|йес) [да|конечно|конешно|канешна|все|все|вроде|пожалуй|возможно]  

```

Сценарий:
```
state:  
    q!: да  
    script:  
        $reactions.answer(JSON.stringify($caila.getEntityWithToken("Yes", "API token")));  

```

В качестве ответа будет передан JSON:
```
{  
"name":"Yes",  
"id":52502,  
"records":{  
"id":902002,  
"values":[  
"[ну конечно|все|все|вроде|пожалуй|возможно (да|даа|lf|ага|агась|точно|угу|верно|ок|ok|окей|окай|okay|оке|именно|подтвержд*|йес) да|конечно|конешно|канешна|все|все|вроде|пожалуй|возможно"  
]  
}  
]  
}  

```