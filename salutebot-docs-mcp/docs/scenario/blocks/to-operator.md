---
title: Переводим пользователя на оператора
source_url: https://developers.sber.ru/docs/ru/salutebot/scenario/blocks/to-operator
tags: [Graph, Code]
---

# Переводим пользователя на оператора

Блок **Перевод на оператора** добавляет возможность продолжить диалог с сотрудником поддержки.
Перевод на оператора не поддерживается в тестовом виджете.
Несмотря на то, что Graph позволяет создавать развитые сценарии общения пользователей с ботом, далеко не все ситуации можно предусмотреть заранее.
Для решения нетривиальных задач вы можете перевести диалог с бота на оператора, который поможет клиенту.
При переводе на оператора диалог видят все сотрудники, независимо от того, сколько диалогов они ведут в данный момент.
Чтобы настроить в сценарии перевод на оператора:
  1. Откройте редактор сценария проекта.
  2. Добавьте на экран «Перейти к каталогу» подсказку **Позови оператора**.
  3. Соедините подсказку с блоком **Перевод на оператора**.
Функцию, аналогичную подсказке **Перевод на оператора** , выполняет одноименный интент на начальном экране чат-бота.
  4. В поле **Сообщение пользователю** укажите сообщение, которое чат-бот напишет в диалоге с пользователем. Например, «Хорошо, передаю ваш вопрос своим коллегам».
  5. Добавьте экран с блоком **Текст** , в котором укажите текст, который увидит клиент, если при переводе на оператора возникнет ошибка.
  6. Соедините опцию **Ошибка перевода** с добавленным блоком **Текст**.

При нажатии на подсказку **Позови оператора** чат-бот будет передавать диалог сотруднику.
Блок **Перевод на оператора** содержит необязательное поле **Сообщение пользователю**. Поле содержит информацию, которая отображается только у пользователя, при начале диалога с оператором.
Переход **Нет оператора** срабатывает когда отсутствуют свободные операторы.
Обрабатывайте возникающие ошибки с помощью опции **Ошибка перевода**.
## Переключаем на оператора Jivo
При работе чат-бота в канале Jivo могут возникать ситуации, когда пользователю не удается связаться с оператором, например, если все операторы заняты. Чтобы обрабатывать такие ситуации вы можете добавить в сценарий возможность собрать контактные данные пользователей и передать их оператору.
Актуальные контактные данные пользователя можно посмотреть в личном кабинете Jivo, в разделе **CRM** → **Клиенты**.
Для этого вам потребуется блок [**Отправить данные оператору**](https://developers.sber.ru/docs/ru/salutebot/scenario/send-user-data-to-operator) либо метод Graph или Code, в зависимости от того, какой инструмент вы используете для разработки сценария чат-бота.
Отправку данных пользователя оператору нельзя проверить в тестовом виджете.
## Передача данных оператору с помощью блока
Graph
Code
Чтобы собрать и передать контактные данные пользователя в Graph:
  1. Откройте сценарий чат-бота в Graph.
  2. В подходящем месте сценария, с помощью блоков **Ввод текста** , предложите пользователю оставить контактные данные: имя, email или телефон. Одно из полей обязательно должно быть заполнено.
  3. Добавьте блок **Отправить данные оператору**.
  4. Заполните поля блока переменными, которые содержат оставленные данные.
  5. Добавьте экраны, которые будут обрабатывать успешное и неуспешное срабатывание отправки данных.

Чтобы передать контактные данные пользователя в Code, в нужном месте сценария вызовите метод `$jivo.sendContact()` с помощью тега [`script`](https://developers.sber.ru/docs/ru/va/code/sa-dsl/tags/reaction-tags#teg-script2):
```
script:  
$jivo.sendContact({"name":"Иван","email":"raw@mail.ru","phone":"+79090990999"})  

```

где:
  * **name** – поле для ввода значения имени клиента. Не более 20 символов.
  * **email клиента** – поле для ввода значения полученного в сценарии email клиента. Не более 256 символов.
  * **phone** – поле для ввода значения полученного в сценарии телефона пользователя. Не более 256 символов. Поля должны поддерживать переменные.

Метод $jivo.sendContact работает в канале Jivo.