---
title: Анализируем отчеты
source_url: https://developers.sber.ru/docs/ru/salutebot/statistic-reports/reports-filter
tags: [Code]
---

# Анализируем отчеты

Для понимания, насколько эффективно работает ваш чат-бот, вам могут потребоваться отчеты. Они строятся на базе диалогов и сессий.
Для настройки отчета вы можете использовать разные параметры — они будут доступны в фильтрах после построения отчета.
Чтобы посмотреть выбранные диалоги в редакторе Code:
  1. Откройте проект чат-бота в Code.
  2. Перейдите в раздел **Аналитика**.
  3. Выберите отчет **Диалоги**.
  4. Добавьте параметры фильтра, например, дату начала диалога или имя пользователя.
  5. Нажмите кнопку получения отчета.

В результате будет отображены отчеты в двух режимах: сессии и фразы.
**Сессия** – это завершенный диалог чат-бота и клиента. **Фраза** – это любое сообщение пользователя или чат-бота.
  * **Сессии** – отфильтрованные сессии диалогов, отображаемые в виде таблицы со следующими параметрами:
    * **Начало** — время и дата начала диалога.
    * **Бот/Смартап** — идентификатор бота (или смартапа).
    * **Кол-во** — количество сообщений клиента без учета стартового сообщения.
    * **ID пользователя/Тип звонка** — идентификатор клиента. Чтобы открыть детализацию диалога нажмите на ID пользователя.
    * **Последняя фраза** — последняя фраза клиента.
    * **Длительность** — длительность диалога с момента его начала и до последней фразы клиента.
  * **Фразы** – отфильтрованные фразы бота или клиента, отображаемые в виде таблицы со следующими параметрами:
    * **Вопрос** — фраза клиента бота.
    * **Класс** — название стейта, в котором была обработана фраза клиента.
    * **Стейт** — название стейта, в котором бот сгенерировал ответ.
    * **Ответ** — ответ бота.

После генерации отчета вы можете выбрать следующие параметры фильтрации.
## Период начала сессии
Позволяет задать начальную дату поиска диалогов по началу сессии. Возвращает диалоги, дата создания которых была в заданном промежутке времени. По умолчанию – 1 сутки от текущей даты. Для установки фильтра выберите дату из календаря.
## Период получения сообщений
Позволяет задать начальную дату поиска по дате сообщений. Возвращает диалоги, для которых найдены сообщения, полученные в заданном промежутке времени. Для установки фильтра выберите дату из календаря.
## ID сессии
Выполняет поиск сессий и фраз по указанному значению идентификатора сессии. Для установки фильтра заполните произвольное строковое значение идентификатора сессии.
## Имя или ID клиента
Выполняет поиск сессии и фраз по указанному идентификатору клиента. Для установки фильтра заполните произвольное строковое значение имени или идентификатора клиента бота. Этот параметр вы можете найти в сформированном отчете.
## Тип сообщений клиента
Позволяет отфильтровать пустые и непустые сессии. Пустая сессия – это сессия, в которой не было получено сообщений от пользователя. Сессия, в которой от пользователя получено только сообщение `/start`, также считается пустой.
Доступны три режима фильтра:
  * **только не пустые** – скрывает все пустые сессии и фразы из пустых сессий. Возвращает сессии, в которых были сообщения от пользователя.
  * **только пустые** – возвращает только пустые сессии, сессии в которых не было получено сообщений от клиента бота и фразы из пустых сессий, в которых не было сообщений от клиента.
  * **все** – возвращает все сессии и фразы.

## Текст в сообщениях клиента
Позволяет найти сессии и сообщения по указанному тексту в сообщениях клиента. Возвращает фразы, текст сообщения которых соответствует запросу и сессии, в которых найдено как минимум одно подходящее сообщение по условию. Для настройки фильтра заполните произвольное строковое значение реплики клиента.
## Текст в ответах бота
Позволяет найти сессии и сообщения по наличию указанного текста в сообщениях бота. Возвращает фразы, текст ответа бота в которых соответствует запросу и сессии, в которых найден как минимум один подходящий ответ бота. Для настройки фильтра заполните произвольное строковое значение для ответа бота.
## ID проектов (публикаций)
Фильтрует сессии и фразы по указанному названию идентификатору публикации. Этот параметр вы можете найти в сформированном отчете. Поиск выполняется по полю `botId`. Возвращает фразы и сессии, соответствующие одному из указанных `botId`. Для настройки фильтра выберите одну или несколько публикаций из списка добавленных.
## Тип интеграции
Фильтрует сессии и фразы по указанному типу интеграции для добавленных в проекте публикаций: тестовый виджет, jivo и т.д. Поиск выполняется по значению `channelType`. Возвращает фразы и сессии, соответствующие одному из указанных типов канала. Для настройки фильтра выберите один или несколько типов интеграций (каналов) из списка добавленных в проекте.
## Сработавшие интенты
Фильтрует сессии и фразы по наличию указанного интента во фразе, т.е. фраза классифицируется по заданному интенту. Поиск выполняется по названию интента во фразе. Возвращает фразы, соответствующие значению интента из запроса, и сессии, для которых найдена как минимум одна фраза с соответствующим интентом. Для настройки фильтра введите название интента или выберите название из списка добавленных. Список интентов формируется из найденных значений интентов в логах.
## Класс сообщения
Фильтрует сессии и фразы по наличию указанного класса. Класс – это название стейта, в котором началась обработка сообщения клиента. Поиск выполняется по значению `nlpClass` во фразе. Возвращает фразы, соответствующие значению класса из запроса, и сессии, для которых найдена как минимум одна фраза с соответствующим классом. Для настройки фильтра введите название класса или выберите название из списка доступных в сценарии. Список классов формируется из найденных значений классов в логах.
## Стейт сообщения
Фильтрует сессии и фразы по наличию указанного стейта, в котором бот сгенерировал ответ. При наличии переходов между стейтами класс и стейт могут не совпадать. Поиск выполняется по значению state во фразе. Возвращает фразы, соответствующие значению стейта из запроса, и сессии, для которых найдена как минимум одна фраза с соответствующим стейтом. Для настройки фильтра введите название стейта или выберите название из списка доступных в сценарии. Список стейтов формируется из найденных значений стейтов в логах.
## Перевод на оператора
Фильтрует сессии и фразы по наличию перевода диалога с ботом оператору. Поиск выполняется по наличию ответа бота с типом `switch`. Можно выбрать один из режимов фильтрации:
  * **с переводом** – возвращает фразы, для которых ответа бота `type: switch`, и сессии, для которых найдена как минимум одна фраза с ответом бота `type: switch`;
  * **без перевода** – возвращает фразы, для которых нет ответа бота `type: switch`, и сессии, для которых нет фраз с ответом бота `type: switch`. При настройке фильтра передается один из доступных режимов.

## Добавление кастомных полей из ответа
Позволяет добавить в отчет и выгрузку кастомные поля из объекта `$response`, позволяет кастомизировать отчет. Для настройки фильтра заполните вручную название переменной, которую необходимо вывести в отчете. Вы можете добавить несколько переменных в фильтр. В результате в выгрузку будет добавлено указанное пользователем поле.